<div class="dashboard-container">
    <%- include('partials/sidemenu.ejs', {activeLink: 'connection-and-account'}) %>
    <div class="dashboard-content fr-col-12 fr-col-lg-10 fr-col-xl-9 fr-col-offset-lg-1">
        <%- include('partials/notifications.ejs', {notifications: notifications}) %>
        <h2>Compte et connexion</h2>
        <section class="fr-mb-6w">
            <h3>Identifiants</h3>
            <div class="fr-input-group fr-input-group--disabled">
                <label class="fr-label" for="text-input-disabled">Adresse email</label>
                <input class="fr-input" disabled type="text" id="text-input-disabled" name="text-input-disabled" value="<%=email%>">
            </div>
            <div class="fr-input-group fr-input-group--disabled fr-mb-1w">
                <label class="fr-label" for="text-input-disabled">Mot de passe</label>
                <input class="fr-input" disabled type="password" id="text-input-disabled" name="text-input-disabled" value="<%=encrypted_password%>">
            </div>
            <form action="/users/reset-password" method="post">
                <input type="hidden" name="_csrf" value="<%= csrfToken; %>">
                <button class="fr-btn btn--fullwidth fr-btn--secondary" type="submit">
                    Réinitialiser votre mot de passe
                </button>
            </form>
        </section>

        <section class="fr-mb-6w">
            <h3>Double authentification</h3>
            <% if (isAuthenticatorConfigured) { %>
                <p>Bravo vous êtes un.e concitoyen.ne très conscient des questions de cybersécurité car vous avez activé la 2FA.</p>
            <% } else { %>
                <p>
                    Vous n'avez pas encore configuré la double authentification (2FA).
                </p>
                <a
                        class="fr-btn fr-btn--secondary"
                        href="/double-authentication"
                >
                    Configurer la 2FA
                </a>
                <!-- <a
                        class="fr-btn fr-btn--secondary fr-btn--icon-left fr-icon-add-line"
                        href="/authenticator-app-configuration"
                >
                    Configurer un code à usage unique
                </a> -->
            <% } %>
        </section>
        
        <section class="fr-mb-6w">
            <h3>Suppression de mon compte</h3>
            <p>
                Pour des raisons légales, vos données sont sauvegardées pendant 3 ans après la suppression de votre compte.
            </p>
            <form class="fr-mt-4w" action="/users/delete" method="post">
                <input type="hidden" name="_csrf" value="<%= csrfToken; %>">
                <button
                        class="fr-btn btn--danger js-confirm"
                        data-confirm="Si vous avez changé d’organisation, vous pouvez les modifier sur votre espace personnel.&#10;&#10;Si vous n’utilisez plus ProConnect avec cette adresse email, vous pouvez supprimer ce compte.&#10;&#10;Voulez vous continuer ?"
                        type="submit"
                >
                    Supprimer mon compte
                </button>
            </form>
        </section>
        <script type="module" src="<%= js('confirm.js') %>"></script>
    </div>
</div>
